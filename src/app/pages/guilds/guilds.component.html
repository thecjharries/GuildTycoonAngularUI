<div class="col-sm-12">

    <div class="row guildTitle">

        <span *ngIf="!editMode">
            <h2>
                {{guild.name}}
            </h2>
        </span>
        <input *ngIf="editMode" #name (keyup)="onKey(name.value)">       

        <span class="glyphicon glyphicon-pencil" aria-hidden="true" (click)="editModeToggle()"></span>

    </div>

    <div class="row">
        
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <div *ngFor="let team of createRange(5); let i = index">
                <div class = "row">
                    <button type="button" class="btn btn-default" (click)="selectTeam(i+1)">Team {{i+1}}</button>
                </div>
            </div>
        </div>

        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <ul>
                <li *ngFor="let i of [1, 2, 3, 4, 5]">
                    <div class="dropdown">
                        <li data-toggle="dropdown">Character {{i}}: {{selectedTeamCharacters[i]?.name}}</li>
                        <ul class="dropdown-menu dropdown-menu-left">
                            <li (click)="assignCharacter(null, i)">Remove</li>
                            <li *ngFor="let character of guild?.characters" (click)="assignCharacter(character, i)">
                                {{character?.name}}
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    
                    <button type="button" class="btn btn-default" (click)="setTeam()">Save</button>
                    
                </li>
            </ul>
        </div>

    </div>


    <div class="row">
        <span>Team Action Summary</span>
        <div *ngFor="let team of guild.teams" class="col-sm-2 well">
            <div class="row">
                <span>Team {{team.teamId}}</span>
            </div>
            <div class="row">
                <span>Zone {{team.currentZone}}</span>
            </div>
            <div class="row">
                <span>Dungeon {{team.dungeonId}}</span>
            </div>
            <div class="row">
                <span *ngIf="team.timeRemaining > 0">{{team.timeRemaining}} seconds remaining</span>
                <span *ngIf="team.timeRemaining <= 0">Task Complete</span>
            </div>
            <button type="button" class="btn btn-default" (click)="completeDungeon(team.teamId)">Complete</button>
        </div>
        <!--<ul>
            <li>{{selectedTeam?.teamId}}</li>
            <li>{{selectedTeam?.currentZone}}</li>
            <li>{{selectedTeam?.dungeonId}}</li>
            <li>{{timeRemaining}}</li>
            
            
        </ul>-->
    </div>
    <!--Character Summary-->
    <div class="row">
        <div *ngFor="let character of guild.characters; let i = index" class="col-sm-2 well">
            
            <div class="row">
                <span *ngIf="!character.editMode">{{character?.name}}</span>
                <input *ngIf="character.editMode" #characterName (keyup)="onKeyCharacter(characterName.value)">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" (click)="editModeToggleCharacter(character.unitId)">
                        Edit</button>
            </div>

            <div class="row">
                <span>HP: {{character?.stats?.base.vitality | vitToHp}}</span>
            </div>

            <div class="row">
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>S: {{character?.stats?.base.strength}}</span>
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>A: {{character?.stats?.base.agility}}</span>
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>D: {{character?.stats?.base.dexterity}}</span>
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>I: {{character?.stats?.base.intelligence}}</span>
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>V: {{character?.stats?.base.vitality}}</span>
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <span>F: {{character?.stats?.base.focus}}</span>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" (click)="pullCharacterCard()">
            Pull New Character</button>
        <li *ngFor="let card of guild?.guildInventory?.characterCards">
            <span>{{card.name}}</span>
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" (click)="redeemCharacterCard(card)">
                Redeem</button>
        </li>
    </div>
        
</div>