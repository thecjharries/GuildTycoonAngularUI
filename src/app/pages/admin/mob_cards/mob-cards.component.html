
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    
    <button type="button" class="btn btn-default" (click)="toggleAdd()">Add</button>

    <!--Regimen-->
    <div *ngIf="enableRegimenAdd" class="Regimen">
        <div class="row">
            <div class="dropdown col-sm-2 col-md-2 col-lg-2">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Target</button>
                <ul class="dropdown-menu">
                    <li *ngFor="let target of regimenActionTargets" (click)="setRegimenActionTarget(target.name)">
                        {{target.name}}
                    </li>
                </ul>
            </div>
            <div class="dropdown col-sm-2 col-md-2 col-lg-2">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Property</button>
                <ul class="dropdown-menu">
                    <li *ngFor="let property of regimenActionProperties" (click)="setRegimenActionTargetProperty(property.name)">
                        {{property.name}}
                    </li>
                </ul>
            </div>
            <div class="dropdown col-sm-2 col-md-2 col-lg-2">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Operator</button>
                <ul class="dropdown-menu">
                    <li *ngFor="let operator of regimenActionOperators" (click)="setRegimenActionTargetOperator(operator.name)">
                        {{operator.name}}
                    </li>
                </ul>
            </div>
            <div class="dropdown col-sm-2 col-md-2 col-lg-2">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Value</button>
                <ul class="dropdown-menu">
                    <li *ngFor="let value of targetValueArray" (click)="setRegimenActionTargetValue(value)">
                        {{value}}
                    </li>
                </ul>
            </div>
            <div class="dropdown col-sm-2 col-md-2 col-lg-2">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Using</button>
                <ul class="dropdown-menu">
                    <li *ngFor="let using of regimenActionUsing" (click)="setRegimenActionUsing(using.name)">
                        {{using.name}}
                    </li>
                </ul>
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2">
                    <button class="btn btn-primary" type="button" (click)="addRegimenAction()">
                        Add
                    </button>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 col-md-2 col-lg-2">
                {{regimenAction?.target}}
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2">
                {{regimenAction?.targetProperty}}
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2">
                {{regimenAction?.targetOperator}}
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2">
                {{regimenAction?.targetValue}}
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2">
                {{regimenAction?.usingSelection}}
            </div>
        </div>

        <div class="row">
            <ul class="regimenStack">
                <li *ngFor="let action of selectedMobCard?.regimen?.regimenStack; let idx = index">
                    <div class="row">
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            {{action?.target}}
                        </div>
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            {{action?.targetProperty}}
                        </div>
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            {{action?.targetOperator}}
                        </div>
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            {{action?.targetValue}}
                        </div>
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            {{action?.usingSelection}}
                        </div>
                        <div class="col-sm-2 col-md-2 col-lg-2">
                            <button type="button" class="btn btn-default" (click)="removeRegimenAction(idx)">Remove</button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    
    
    <table style="table-layout:fixed" class="table table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Strength</th>
                <th>Agility</th>
                <th>Dexterity</th>
                <th>Intelligence</th>
                <th>Vitality</th>
                <th>Focus</th>
                <th>Level</th>
                <th>Major Mob Type</th>
                <th>Sub Mob Type</th>
                <th>Regimen</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="enableAdd">
                <td><input #name (keyup)="onKey(name.value, 'name')"></td>
                <td><input #strength (keyup)="onKey(strength.value, 'strength')"></td>
                <td><input #agility (keyup)="onKey(agility.value, 'agility')"></td>
                <td><input #dexterity (keyup)="onKey(dexterity.value, 'dexterity')"></td>
                <td><input #intelligence (keyup)="onKey(intelligence.value, 'intelligence')"></td>
                <td><input #vitality (keyup)="onKey(vitality.value, 'vitality')"></td>
                <td><input #focus (keyup)="onKey(focus.value, 'focus')"></td>
                <td><input #level (keyup)="onKey(level.value, 'level')"></td>
                <td><input #majorMobType (keyup)="onKey(majorMobType.value, 'majorMobType')"></td>
                <td><input #subMobType (keyup)="onKey(subMobType.value, 'subMobType')"></td>
                <td><button type="button" class="btn btn-default" (click)="editRegimen()">Edit Regimen</button></td>
                <td><button *ngIf="enableAdd" type="button" class="btn btn-default" (click)="createMobCard()">Save</button></td>
            </tr>
            <tr *ngFor="let mobCard of mobCards">
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.name}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.name}}" #name (keyup)="onKey(name.value, 'name', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.strength}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.strength}}" #strength (keyup)="onKey(strength.value, 'strength', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.agility}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.agility}}" #agility (keyup)="onKey(agility.value, 'agility', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.dexterity}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.dexterity}}" #dexterity (keyup)="onKey(dexterity.value, 'dexterity', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.intelligence}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.intelligence}}" #intelligence (keyup)="onKey(intelligence.value, 'intelligence', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.vitality}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.vitality}}" #vitality (keyup)="onKey(vitality.value, 'vitality', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.focus}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.focus}}" #focus (keyup)="onKey(focus.value, 'focus', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.level}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.level}}" #level (keyup)="onKey(level.value, 'level', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.majorMobType}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.majorMobType}}" #majorMobType (keyup)="onKey(majorMobType.value, 'majorMobType', mobCard)">
                </td>
                <td>
                    <span *ngIf="!mobCard.editMode">{{mobCard.subMobType}}</span>
                    <input *ngIf="mobCard.editMode" placeholder="{{mobCard.subMobType}}" #subMobType (keyup)="onKey(subMobType.value, 'subMobType', mobCard)">
                </td>
                <td>
                    <button type="button" class="btn btn-default" (click)="toggleEditRegimen(mobCard)">Edit Regimen</button>
                </td>
                <td>
                    <button *ngIf="!mobCard.editMode" type="button" class="btn btn-default" (click)="toggleEdit(mobCard)">Edit</button>
                    <button *ngIf="mobCard.editMode" type="button" class="btn btn-default" (click)="updateMobCard(mobCard)">Save</button>
                </td>
                <td>
                    <button type="button" class="btn btn-default" (click)="deleteMobCard(mobCard)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
    
</div>
